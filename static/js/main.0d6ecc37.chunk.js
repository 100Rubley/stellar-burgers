(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{118:function(e,t,n){e.exports={wrapper:"error404_wrapper__1uZau"}},120:function(e,t,n){e.exports={constructorWrapper:"draggable-ingredient_constructorWrapper__32JYu"}},121:function(e,t,n){e.exports={overlay:"modal-overlay_overlay__2GQrt"}},122:function(e,t,n){e.exports={wrapper:"order-details_wrapper__19-Vd"}},123:function(e,t,n){e.exports={wrapper:"main-content-container_wrapper__2A_ZV"}},131:function(e,t,n){},215:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(43),i=n.n(a),s=(n(131),"SET_INGREDIENTS_SUCCESS"),o="SET_INGREDIENTS_REQUEST",l="SET_INGREDIENTS_ERROR",d="SET_CURRENT_INGREDIENT",u="REMOVE_CURRENT_INGREDIENT",p="SHOW_INGREDIENTS_MODAL",j="HIDE_INGREDIENTS_MODAL",m="ADD_BUN",b="ADD_INGREDIENT",_="MOVE_INGREDIENT",O="REMOVE_ITEM",f="ADD_TO_INGREDIENTS_MAP",x="ADD_TO_BUN_MAP",h="POST_ORDER_SUCCESS",g="POST_ORDER_REQUEST",v="POST_ORDER_ERROR",y="CLEAR_CONSTRUCTOR",N="SHOW_MODAL",w="HIDE_MODAL",I="REQUEST",C="REQUEST_ERROR",E="REQUEST_SUCCESS",S="WS_CONNECTION_START",T="WS_CONNECTION_PROFILE_ORDERS_START",k="WS_USER_CONNECTION_SUCCESS",R="WS_CONNECTION_SUCCESS",D="WS_USER_CONNECTION_ERROR",W="WS_CONNECTION_ERROR",M="WS_USER_CONNECTION_CLOSED",A="WS_CONNECTION_CLOSED",U="WS_GET_ORDERS",P="WS_GET_USER_ORDERS",B=n(85),z=n.n(B),q=n(115),L=n(2),G="https://norma.nomoreparties.space/api",H="wss://norma.nomoreparties.space/orders",J="bun",F="sauce",Q="main",V=[{displayName:"\u0411\u0443\u043b\u043a\u0438",type:J},{displayName:"\u0421\u043e\u0443\u0441\u044b",type:F},{displayName:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",type:Q}],X={title:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440",path:"/"},K={title:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432",path:"/feed"},Z={title:"",path:"/feed/:id"},Y={title:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442",path:"/profile"},$={title:"",path:"/profile/orders"},ee={title:"",path:"/profile/orders/:id"},te={title:"\u0418\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442",path:"/ingredients/:ingredientId"},ne={title:"\u0412\u0445\u043e\u0434",path:"/login"},re={title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",path:"/register"},ce={title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",path:"/forgot-password"},ae={title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",path:"/reset-password"},ie=function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},se=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(n=Object(L.a)({path:"/"},n)).expires instanceof Date&&(n.expires=n.expires.toUTCString());var r=encodeURIComponent(e)+"="+encodeURIComponent(t);for(var c in n){r+="; "+c;var a=n[c];!0!==a&&(r+="="+a)}document.cookie=r},oe=function(e){se(e,"",{"max-age":-1})},le=function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))},de=function(){return fetch("".concat(G,"/auth/token"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({token:ie("refreshToken")})}).then(le)},ue=function(){var e=Object(q.a)(z.a.mark((function e(t){var n,r,c,a,i,s=arguments;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},e.prev=1,e.next=4,fetch(t,n);case 4:return r=e.sent,e.next=7,le(r);case 7:return c=e.sent,e.abrupt("return",c);case 11:if(e.prev=11,e.t0=e.catch(1),"jwt expired"!==e.t0.message){e.next=28;break}return e.next=16,de();case 16:return a=e.sent,se("refreshToken",a.refreshToken),se("accessToken",a.accessToken),n.headers.authorization=a.accessToken,e.next=22,fetch(t,n);case 22:return i=e.sent,e.next=25,le(i);case 25:return e.abrupt("return",e.sent);case 28:throw e.t0;case 29:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),pe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"This value was promised to be there";if(void 0===e||null===e)throw new TypeError(t);return e},je=function(e,t){return e.find((function(e){return e._id===t}))},me=function(){return function(e){e({type:o}),fetch("".concat(G,"/ingredients")).then(le).then((function(t){var n;t&&t.success&&e((n=t.data,{type:s,ingredients:n}))})).catch((function(t){e({type:l}),console.log(t)}))}},be=n(4),_e=n(11),Oe=n(6),fe=n(52),xe=n.n(fe),he=n(64),ge=n.n(he),ve=n(0),ye=function(e){var t=e.path,n=e.exact,r=e.children,c=e.text;return Object(ve.jsx)("div",{className:"pl-5",children:Object(ve.jsxs)(Oe.c,{to:t,activeClassName:ge.a.active,className:ge.a.inactive,exact:null!==n&&void 0!==n&&n,children:[r,Object(ve.jsx)("span",{className:"text text_type_main-default ".concat(ge.a.navTitle," pl-2 pr-5"),children:c})]})})},Ne=function(){var e=Object(_e.h)().pathname;return Object(ve.jsx)("header",{className:xe.a.header,children:Object(ve.jsxs)("div",{className:xe.a.wrapper,children:[Object(ve.jsxs)("nav",{className:xe.a.nav,children:[Object(ve.jsx)(ye,{text:X.title,path:X.path,exact:!0,children:Object(ve.jsx)(be.BurgerIcon,{type:e===X.path?"primary":"secondary"})}),Object(ve.jsx)(ye,{text:K.title,path:K.path,children:Object(ve.jsx)(be.ListIcon,{type:e===K.path?"primary":"secondary"})})]}),Object(ve.jsx)("div",{className:xe.a.logoWrapper,children:Object(ve.jsx)(Oe.c,{to:X.path,children:Object(ve.jsx)(be.Logo,{})})}),Object(ve.jsx)("menu",{children:Object(ve.jsx)(ye,{text:Y.title,path:Y.path,children:Object(ve.jsx)(be.ProfileIcon,{type:e===Y.path?"primary":"secondary"})})})]})})},we=n(28),Ie=n(7),Ce=n(87),Ee=n.n(Ce),Se=n(51),Te=Se.c,ke=function(){return Object(Se.b)()},Re=function(){return{type:I}},De=function(){return{type:C}},We=function(e,t){return{type:E,payload:{email:e,name:t,isAuth:!0}}},Me=function(e){return function(t){t({type:I,payload:{resetPassSuccess:!1}}),fetch("".concat(G,"/password-reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}).then(le).then((function(e){e&&e.success&&t({type:E,payload:{resetPassSuccess:!0}})})).catch((function(e){t({type:C,payload:{resetPassSuccess:!1}}),console.log(e)}))}},Ae=function(e,t){return function(n){n(Re()),fetch("".concat(G,"/password-reset/reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e,token:t})}).then(le).then((function(e){e&&e.success&&n({type:E})})).catch((function(e){n(De()),console.log(e)}))}},Ue=function(e,t,n){return function(r){r(Re()),fetch("".concat(G,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,name:n})}).then(le).then((function(t){if(t&&t.success){se("refreshToken",t.refreshToken);var c=t.accessToken.split("Bearer ")[1];c&&se("accessToken",c),r(function(e,t){return{type:E,payload:{email:e,name:t,isAuth:!0}}}(e,n))}})).catch((function(e){r(De()),console.log(e)}))}},Pe=function(e,t){return function(n){n(Re()),fetch("".concat(G,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then(le).then((function(e){if(e&&e.success){se("refreshToken",e.refreshToken);var t=e.accessToken.split("Bearer ")[1];t&&se("accessToken",t),n(function(e,t){return{type:E,payload:{email:e,name:t,isAuth:!0}}}(e.user.email,e.user.name))}})).catch((function(e){n(De()),console.log(e)}))}},Be=function(){return function(e){var t=ie("refreshToken");e(Re()),fetch("".concat(G,"/auth/logout"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t})}).then(le).then((function(t){t&&t.success&&(e({type:E,payload:{email:"",password:"",isAuth:!1}}),oe("refreshToken"),oe("accessToken"))})).catch((function(t){e(De()),console.log(t)}))}},ze=function(){return function(e){e(Re()),ue("".concat(G,"/auth/user"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(ie("accessToken"))}}).then((function(t){t&&t.success&&e(We(t.user.email,t.user.name))})).catch((function(t){e(De()),console.log(t)}))}},qe=function(){var e=Object(r.useState)({email:"",password:""}),t=Object(Ie.a)(e,2),n=t[0],c=t[1],a=function(e){c(Object(L.a)(Object(L.a)({},n),{},Object(we.a)({},e.target.name,e.target.value)))},i=Object(r.useState)("HideIcon"),s=Object(Ie.a)(i,2),o=s[0],l=s[1],d=ke(),u=Object(r.useRef)(null),p="ShowIcon"===o?"text":"password",j=Object(r.useCallback)((function(e){e.preventDefault(),d(Pe(n.email,n.password))}),[n,d]);return Object(ve.jsxs)("div",{className:Ee.a.wrapper,children:[Object(ve.jsxs)("form",{className:Ee.a.form,onSubmit:j,children:[Object(ve.jsx)("div",{className:"text text_type_main-default mt-15",children:"\u0412\u0445\u043e\u0434"}),Object(ve.jsx)("div",{"data-cy":"login_emailInput",children:Object(ve.jsx)(be.Input,{type:"email",placeholder:"E-mail",name:"email",size:"default",onChange:a,value:n.email||""})}),Object(ve.jsx)(be.Input,{type:p,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",size:"default",icon:o,onChange:a,onIconClick:function(){setTimeout((function(){return u.current.focus()}),0),l("ShowIcon"===o?"HideIcon":"ShowIcon")},ref:u,value:n.password||""}),Object(ve.jsx)(be.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(ve.jsxs)("div",{className:"text text_type_main-default mt-15 text_color_inactive",children:["\u0412\u044b - \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?",Object(ve.jsx)("span",{children:Object(ve.jsx)(Oe.b,{to:"/register",children:Object(ve.jsx)(be.Button,{type:"secondary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})})]}),Object(ve.jsxs)("div",{className:"text text_type_main-default mt-4 text_color_inactive",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(ve.jsx)("span",{children:Object(ve.jsx)(Oe.b,{to:"/forgot-password",children:Object(ve.jsx)(be.Button,{type:"secondary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})})})]})]})},Le=n(88),Ge=n.n(Le),He=function(){var e=ke(),t=Object(r.useState)({email:"",name:"",password:""}),n=Object(Ie.a)(t,2),a=n[0],i=n[1],s=function(e){i(Object(L.a)(Object(L.a)({},a),{},Object(we.a)({},e.target.name,e.target.value)))},o=c.a.useState("HideIcon"),l=Object(Ie.a)(o,2),d=l[0],u=l[1],p="ShowIcon"===d?"text":"password",j=c.a.useRef(null),m=Object(r.useCallback)((function(t){t.preventDefault(),e(Ue(a.email,a.password,a.name))}),[a,e]);return Object(ve.jsxs)("div",{className:Ge.a.wrapper,children:[Object(ve.jsxs)("form",{className:Ge.a.form,onSubmit:m,children:[Object(ve.jsx)("div",{className:"text text_type_main-default mt-15",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(ve.jsx)(be.Input,{type:"text",placeholder:"\u0418\u043c\u044f",name:"name",size:"default",onChange:s,value:a.name||""}),Object(ve.jsx)(be.Input,{type:"email",placeholder:"E-mail",name:"email",size:"default",onChange:s,value:a.email||""}),Object(ve.jsx)(be.Input,{type:p,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",size:"default",icon:d,onChange:s,ref:j,onIconClick:function(){setTimeout((function(){return j.current.focus()}),0),u("ShowIcon"===d?"HideIcon":"ShowIcon")},value:a.password||""}),Object(ve.jsx)(be.Button,{type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(ve.jsxs)("div",{className:"text text_type_main-default mt-15 text_color_inactive",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",Object(ve.jsx)("span",{children:Object(ve.jsx)(Oe.b,{to:"/login",children:Object(ve.jsx)(be.Button,{type:"secondary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})})})]})]})},Je=n(89),Fe=n.n(Je),Qe=function(){var e=Object(_e.g)(),t=ke(),n=Object(_e.h)(),c=Object(r.useState)(""),a=Object(Ie.a)(c,2),i=a[0],s=a[1];Te((function(e){return e.user.resetPassSuccess}))&&(e.replace({pathname:"/reset-password"}),t({type:I,payload:{resetPassSuccess:!1}}));var o=Object(r.useCallback)((function(e){e.preventDefault(),t(Me(i))}),[i,t]);return Object(ve.jsxs)("div",{className:Fe.a.wrapper,children:[Object(ve.jsxs)("form",{className:Fe.a.form,onSubmit:o,children:[Object(ve.jsx)("div",{className:"text text_type_main-default mt-15",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(ve.jsx)(be.Input,{type:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",name:"email",size:"default",onChange:function(e){s(e.target.value)},value:i}),Object(ve.jsx)(Oe.b,{to:{pathname:"reset-password",state:{prevPath:n.pathname}},children:Object(ve.jsx)(be.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})})]}),Object(ve.jsxs)("div",{className:"text text_type_main-default mt-15 text_color_inactive",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(ve.jsx)("span",{children:Object(ve.jsx)(Oe.b,{to:"/login",children:Object(ve.jsx)(be.Button,{type:"secondary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})})})]})]})},Ve=n(90),Xe=n.n(Ve),Ke=function(){var e=Object(_e.g)(),t=Object(_e.h)();"/forgot-password"!==(t.state&&t.state.prevPath)&&e.goBack();var n=ke(),c=Object(r.useState)("HideIcon"),a=Object(Ie.a)(c,2),i=a[0],s=a[1],o="ShowIcon"===i?"text":"password",l=Object(r.useRef)(null),d=Object(r.useState)({password:"",code:""}),u=Object(Ie.a)(d,2),p=u[0],j=u[1],m=function(e){j(Object(L.a)(Object(L.a)({},p),{},Object(we.a)({},e.target.name,e.target.value)))},b=Object(r.useCallback)((function(e){e.preventDefault(),n(Ae(p.password,p.code))}),[n,p]);return Object(ve.jsxs)("div",{className:Xe.a.wrapper,children:[Object(ve.jsxs)("form",{className:Xe.a.form,onSubmit:b,children:[Object(ve.jsx)("div",{className:"text text_type_main-default mt-15",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"}),Object(ve.jsx)(be.Input,{type:o,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",name:"password",size:"default",icon:i,ref:l,onIconClick:function(){setTimeout((function(){return l.current.focus()}),0),s("ShowIcon"===i?"HideIcon":"ShowIcon")},value:p.password||"",onChange:m}),Object(ve.jsx)(be.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",name:"name",size:"default",value:p.code||"",onChange:m}),Object(ve.jsx)(be.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(ve.jsxs)("div",{className:"text text_type_main-default mt-15 text_color_inactive",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(ve.jsx)("span",{children:Object(ve.jsx)(Oe.b,{to:"/login",children:Object(ve.jsx)(be.Button,{type:"secondary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})})})]})]})},Ze=n(30),Ye=n.n(Ze),$e=function(){var e=ke(),t=Te((function(e){return e.user.request})),n=Te((function(e){return e.user.name})),c=Te((function(e){return e.user.email})),a=Te((function(e){return e.user.password})),i=Object(r.useState)({email:"".concat(c),name:"".concat(n),password:"".concat(a)}),s=Object(Ie.a)(i,2),o=s[0],l=s[1],d=function(e){l(Object(L.a)(Object(L.a)({},o),{},Object(we.a)({},e.target.name,e.target.value)))},u=Object(r.useState)(!1),p=Object(Ie.a)(u,2),j=p[0],m=p[1],b=function(){return m(!j)},_=function(){return m(!0)};Object(r.useEffect)((function(){e(ze())}),[e]);var O=Object(r.useState)("/profile"),f=Object(Ie.a)(O,2),x=f[0],h=f[1],g="text text_type_main-medium text_color_inactive";return Object(ve.jsxs)("div",{className:"".concat(Ye.a.wrapper," mt-15"),children:[Object(ve.jsxs)("nav",{className:"".concat(Ye.a.nav," mr-30"),children:[Object(ve.jsxs)("div",{className:"".concat(Ye.a.list," mb-20"),children:[Object(ve.jsx)(Oe.c,{to:"/profile",className:"".concat(Ye.a.listItem," ").concat(g),activeClassName:"/profile"===x?"".concat(Ye.a.active):"",onClick:function(){return h("/profile")},children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(ve.jsx)(Oe.c,{to:"/profile/orders",className:"".concat(Ye.a.listItem," ").concat(g),activeClassName:"/profile/orders"===x?"".concat(Ye.a.active):"",onClick:function(){return h("/profile/orders")},children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(ve.jsx)("div",{className:"".concat(Ye.a.listItem," ").concat(g),onClick:function(){e(Be())},children:"\u0412\u044b\u0445\u043e\u0434"})]}),Object(ve.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]}),t?Object(ve.jsx)("div",{children:"Loading..."}):Object(ve.jsxs)("form",{className:Ye.a.form,onSubmit:function(t){var n,r;t.preventDefault(),e((n=o.email,r=o.name,function(e){e(Re()),ue("".concat(G,"/auth/user"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(ie("accessToken"))},body:JSON.stringify({email:n,name:r})}).then((function(t){t&&t.success&&e(We(t.user.email,t.user.name))})).catch((function(t){e(De()),console.log(t)}))})),m(!1)},children:[Object(ve.jsx)(be.Input,{type:"text",placeholder:"\u0418\u043c\u044f",name:"name",size:"default",icon:"EditIcon",onIconClick:b,onFocus:_,onChange:d,value:o.name||""}),Object(ve.jsx)(be.Input,{type:"email",placeholder:"E-mail",name:"email",size:"default",icon:"EditIcon",onIconClick:b,onFocus:_,onChange:d,value:o.email||""}),Object(ve.jsx)(be.Input,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",size:"default",icon:"EditIcon",onIconClick:b,onFocus:_,onChange:d,value:o.password||""}),j&&Object(ve.jsxs)("div",{children:[Object(ve.jsx)(be.Button,{type:"secondary",size:"medium",onClick:function(e){e.preventDefault(),l({email:"".concat(c),name:"".concat(n),password:"".concat(a)}),m(!1)},children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(ve.jsx)(be.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})]})},et=n(118),tt=n.n(et),nt=function(){return Object(ve.jsx)("div",{className:"".concat(tt.a.wrapper," text text_type_main-medium text_color_inactive"),children:"(\u0ca0_\u0ca0) \u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \xaf\\_(\u30c4)_/\xaf"})},rt=n(63),ct=["children"],at=function(e){var t=e.children,n=Object(rt.a)(e,ct),c=Te((function(e){return e.user.isAuth})),a=Object(r.useState)(!1),i=Object(Ie.a)(a,2),s=i[0],o=i[1],l=Object(_e.h)(),d=ke();return Object(r.useEffect)((function(){d(ze()),o(!0)}),[d]),s?Object(ve.jsx)(_e.b,Object(L.a)(Object(L.a)({},n),{},{render:function(){return c?t:Object(ve.jsx)(_e.a,{to:{pathname:ne.path,state:{from:l}}})}})):null},it=function(e){return function(t){var n;"bun"===e.type?(t((n=e._id,{type:x,id:n})),t(function(e){return{type:m,item:e}}(e))):(t(function(e){return{type:f,id:e}}(e._id)),t(function(e){return{type:b,item:e}}(e)))}},st=function(e){return function(t){t({type:g}),fetch("".concat(G,"/orders"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(ie("accessToken"))},body:JSON.stringify({ingredients:e})}).then(le).then((function(e){var n;e&&e.success&&(t((n=e.order.number,{type:h,number:n})),t({type:y}))})).catch((function(e){t({type:v}),console.log(e)}))}},ot=n(33),lt=n.n(ot),dt=n(44),ut=n.n(dt),pt=n(222),jt=function(e){var t=e.ingredient,n=ke(),r=Object(_e.h)(),c=t._id,a=Te((function(e){var t;return null===(t=e.burgerConstructor.bunMap)||void 0===t?void 0:t.get(c)})),i=Te((function(e){var t;return null===(t=e.burgerConstructor.ingredientsMap)||void 0===t?void 0:t.get(c)})),s="bun"===t.type?a:i,o=Object(pt.a)((function(){return{type:"ingredient",item:{ingredient:t},end:function(e,r){var c=r.getDropResult();if(e&&c){var a=Date.now()+Math.random();n(it(Object(L.a)(Object(L.a)({},t),{},{uniqueId:a})))}},collect:function(e){return{isDragging:e.isDragging()}}}})),l=Object(Ie.a)(o,2)[1];return Object(ve.jsx)(Oe.b,{to:{pathname:"/ingredients/".concat(c),state:{background:r}},className:ut.a.link,"data-cy":"ingredientContainer",children:Object(ve.jsxs)("div",{className:ut.a.wrapper,ref:l,children:[Object(ve.jsx)("div",{className:"mr-4 ml-4",children:Object(ve.jsxs)("div",{className:ut.a.counter,children:[Object(ve.jsx)("img",{src:t.image,alt:"\u0424\u043e\u0442\u043e \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),!!s&&Object(ve.jsx)(be.Counter,{count:"bun"===t.type?2:s,size:"default"})]})}),Object(ve.jsxs)("div",{className:"".concat(ut.a.price," text text_type_main-medium mt-1 mb-1"),children:[Object(ve.jsx)("span",{className:"mr-2",children:t.price}),Object(ve.jsx)(be.CurrencyIcon,{type:"primary"})]}),Object(ve.jsx)("div",{className:"".concat(ut.a.name," text text_type_main-default"),children:t.name})]})},c)},mt=function(e){var t=e.handleClick,n=Te((function(e){return e.ingredients.ingredients})),c=Te((function(e){return e.ingredients.ingredientsRequest})),a=Object(r.useState)(J),i=Object(Ie.a)(a,2),s=i[0],o=i[1],l=Object(r.useRef)(null),d=Object(r.useRef)(null),u=Object(r.useRef)(null),p=Object(r.useRef)(null),j=function(e){o(e),e===J?l.current.scrollIntoView({behavior:"smooth"}):e===Q?u.current.scrollIntoView({behavior:"smooth"}):d.current.scrollIntoView({behavior:"smooth"})};return Object(ve.jsxs)("article",{className:lt.a.wrapper,children:[Object(ve.jsx)("p",{className:"text text_type_main-large mt-10",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(ve.jsx)("div",{style:{display:"flex"},className:"mt-5",ref:p,children:V.map((function(e){return Object(ve.jsx)(be.Tab,{value:e.type,active:s===e.type,onClick:j,children:e.displayName},e.type)}))}),c?Object(ve.jsx)("div",{children:"Loading"}):Object(ve.jsxs)("section",{className:"".concat(lt.a.scrollable," mt-10"),id:"scroll",onScroll:function(){var e=p.current.getBoundingClientRect().top,t=Math.abs(e-l.current.getBoundingClientRect().top),n=Math.abs(e-d.current.getBoundingClientRect().top),r=Math.abs(e-u.current.getBoundingClientRect().top),c=Math.min(t,n,r);o(c===t?J:c===n?F:Q)},children:[Object(ve.jsxs)("figure",{className:lt.a.figure,children:[Object(ve.jsx)("p",{className:"text text_type_main-medium",id:"bun",ref:l,children:"\u0411\u0443\u043b\u043a\u0438"}),n.filter((function(e){return"bun"===e.type})).map((function(e){return Object(ve.jsx)("div",{className:"".concat(lt.a.ingredientContainer," mt-6 ml-4 mb-10"),onClick:function(){t(e._id)},id:e._id,children:Object(ve.jsx)(jt,{ingredient:e})},e._id)}))]}),Object(ve.jsxs)("figure",{className:lt.a.figure,children:[Object(ve.jsx)("p",{className:"text text_type_main-medium",id:"sauce",ref:d,children:"\u0421\u043e\u0443\u0441\u044b"}),n.filter((function(e){return"sauce"===e.type})).map((function(e){return Object(ve.jsx)("div",{className:"".concat(lt.a.ingredientContainer," mt-6 ml-4 mb-10"),onClick:function(){t(e._id)},id:e._id,children:Object(ve.jsx)(jt,{ingredient:e})},e._id)}))]}),Object(ve.jsxs)("figure",{className:lt.a.figure,children:[Object(ve.jsx)("p",{className:"text text_type_main-medium",id:"main",ref:u,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}),n.filter((function(e){return"main"===e.type})).map((function(e){return Object(ve.jsx)("div",{className:"".concat(lt.a.ingredientContainer," mt-6 ml-4 mb-10"),onClick:function(){t(e._id)},id:e._id,children:Object(ve.jsx)(jt,{ingredient:e})},e._id)}))]})]})]})},bt=n(14),_t=n(39),Ot=n.n(_t),ft=n(223),xt=n(120),ht=n.n(xt),gt=function(e){var t=e.name,n=e.price,c=e.image,a=e.uniqueId,i=Object(r.useRef)(null),s=ke(),o=Object(ft.a)({accept:"constructor",hover:function(e,t){var n;if(i.current){var r=e.uniqueId,c=a;if(r!==c){var o=null===(n=i.current)||void 0===n?void 0:n.getBoundingClientRect(),l=(o.bottom-o.top)/2,d=t.getClientOffset().y-o.top;r<c&&d<l||r>c&&d>l||(s(function(e,t){return{type:_,dragIndex:e,hoverIndex:t}}(r,c)),e.index=c)}}}}),l=Object(Ie.a)(o,2)[1],d=Object(pt.a)({type:"constructor",item:function(){return{uniqueId:a}},collect:function(e){return{isDragging:e.isDragging()}}}),u=Object(Ie.a)(d,2),p=u[0].isDragging;l((0,u[1])(i));var j=p?0:1;return Object(ve.jsxs)("div",{className:ht.a.constructorWrapper,ref:i,style:{opacity:j},children:[Object(ve.jsx)(be.DragIcon,{type:"primary"}),Object(ve.jsx)(be.ConstructorElement,{text:t,price:n,thumbnail:c,handleClose:function(){s({type:O,id:a})}})]},a)},vt=function(e){var t=e.handleRequest,n=Te((function(e){var t;return null===(t=e.burgerConstructor)||void 0===t?void 0:t.bun})),r=Te((function(e){var t;return null===(t=e.burgerConstructor)||void 0===t?void 0:t.constructorIngredients})),c=0!==n.price,a=!1===!Object.keys(r).length,i=Object(ft.a)((function(){return{accept:"ingredient"}})),s=Object(Ie.a)(i,2)[1],o=[n._id].concat(Object(bt.a)(r.map((function(e){return e._id}))));return Object(ve.jsxs)("article",{className:"".concat(Ot.a.wrapper," mt-25"),ref:s,"data-cy":"dropTarget",children:[c||a?Object(ve.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[c&&Object(ve.jsx)("div",{className:Ot.a.bun,children:Object(ve.jsx)(be.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(n.name," (\u0432\u0435\u0440\u0445)"),price:n.price,thumbnail:n.image})}),Object(ve.jsx)("section",{className:"".concat(Ot.a.scrollable),children:a?null===r||void 0===r?void 0:r.map((function(e){return Object(ve.jsx)(gt,{uniqueId:e.uniqueId,name:e.name,price:e.price,image:e.image},e.uniqueId)})):Object(ve.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043d\u0430\u0447\u0438\u043d\u043a\u0443"})}),c&&Object(ve.jsx)("div",{className:Ot.a.bun,children:Object(ve.jsx)(be.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(n.name," (\u043d\u0438\u0437)"),price:n.price,thumbnail:n.image})})]}):Object(ve.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0431\u0443\u043b\u043a\u0443"}),c&&a&&Object(ve.jsxs)("footer",{className:"".concat(Ot.a.footer," mt-10"),children:[Object(ve.jsxs)("span",{className:"".concat(Ot.a.summary," mr-10 text text_type_main-large"),children:[r.reduce((function(e,t){return e+t.price}),0)+n.price,Object(ve.jsx)(be.CurrencyIcon,{type:"primary"})]}),Object(ve.jsx)(be.Button,{type:"primary",size:"large",onClick:function(){t(o)},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})},yt=n(65),Nt=n.n(yt),wt=n(121),It=n.n(wt),Ct=function(e){var t=e.children,n=e.handleOverlayClick;return Object(ve.jsx)("div",{className:It.a.overlay,onClick:function(e){return e.currentTarget===e.target&&n()},children:t})},Et=function(e){var t=e.children,n=e.headerTitle,c=e.from,i=ke(),s=Object(_e.g)();Object(r.useEffect)((function(){return document.addEventListener("keydown",o),function(){return document.removeEventListener("keydown",o)}}));var o=function(e){"Escape"===e.key&&l()},l=function(){i({type:w}),i({type:j}),i({type:u}),s.replace({pathname:c})};return Object(a.createPortal)(Object(ve.jsx)(Ct,{handleOverlayClick:l,children:Object(ve.jsxs)("div",{className:Nt.a.wrapper,children:[Object(ve.jsxs)("div",{className:Nt.a.header,children:["string"===typeof n?Object(ve.jsx)("p",{className:"text text_type_main-large",children:n}):Object(ve.jsx)("p",{className:"text text_type_digits-default",children:n}),Object(ve.jsx)("button",{className:Nt.a.button,onClick:l,"data-cy":"closeModal",children:Object(ve.jsx)(be.CloseIcon,{type:"primary"})})]}),t]})}),document.getElementById("modal"))},St=n(122),Tt=n.n(St),kt=n.p+"static/media/orderCheck.72dc0038.svg",Rt=function(e){var t=e.orderId;return Object(ve.jsxs)("div",{className:Tt.a.wrapper,children:[Object(ve.jsxs)("h2",{className:"text text_type_digits-large",children:[" ",0===t?null:t,"  "]}),Object(ve.jsx)("p",{className:"text text_type_main-medium mt-8 mb-15",children:"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(ve.jsx)("img",{src:kt,alt:"check"}),Object(ve.jsx)("p",{className:"text text_type_main-default mt-15 mb-8",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(ve.jsx)("p",{className:"text text_type_main-default text_color_inactive mb-30",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},Dt=n(123),Wt=n.n(Dt),Mt=function(){var e=Te((function(e){return e.user})).isAuth,t=Te((function(e){return e.burgerConstructor.order})),n=Te((function(e){return e.burgerConstructor.isModal})),r=Object(_e.g)(),c=ke(),a=Object(_e.h)();return Object(ve.jsxs)("div",{className:Wt.a.wrapper,children:[Object(ve.jsx)(mt,{handleClick:function(e){r.replace({pathname:"/ingredients/".concat(e)})}}),Object(ve.jsx)(vt,{handleRequest:function(t){e?(c(st(t)),c({type:N})):r.replace({pathname:"/login",state:{from:a}})}}),n&&Object(ve.jsx)(Et,{from:"/",children:Object(ve.jsx)(Rt,{orderId:t})})]})},At=n(40),Ut=n.n(At),Pt=function(e){var t=e.data;return t?Object(ve.jsxs)("div",{className:Ut.a.wrapper,children:[Object(ve.jsx)("div",{children:Object(ve.jsx)("img",{src:t.image_large,alt:"Ingredient"})}),Object(ve.jsx)("p",{className:"text text_type_main-medium mt-4",children:t.name}),Object(ve.jsxs)("div",{className:"".concat(Ut.a.detailsContainer," mt-4 mb-15"),children:[Object(ve.jsxs)("div",{className:Ut.a.details,children:[Object(ve.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b"}),Object(ve.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:t.calories})]}),Object(ve.jsxs)("div",{className:Ut.a.details,children:[Object(ve.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(ve.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:t.proteins})]}),Object(ve.jsxs)("div",{className:Ut.a.details,children:[Object(ve.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(ve.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:t.fat})]}),Object(ve.jsxs)("div",{className:Ut.a.details,children:[Object(ve.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(ve.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:t.carbohydrates})]})]})]}):null},Bt=function(e){var t=e.ingredients,n=Object(_e.i)().ingredientId,c=t.filter((function(e){return e._id===n}))[0],a=ke(),i=Object(_e.h)();return Object(r.useEffect)((function(){c||a({type:d,ingredient:c})}),[a,c]),Object(ve.jsx)(ve.Fragment,{children:i.key?Object(ve.jsx)(Et,{headerTitle:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",from:"/",children:Object(ve.jsx)(Pt,{data:c})}):Object(ve.jsx)(Pt,{data:c})})},zt=["children"],qt=function(e){var t,n=e.children,c=Object(rt.a)(e,zt),a=Te((function(e){return e.user.isAuth})),i=Object(r.useState)(!1),s=Object(Ie.a)(i,2),o=s[0],l=s[1],d=ke(),u=null===(t=Object(_e.h)().state)||void 0===t?void 0:t.from,p=u?u.pathname:X.path;return Object(r.useEffect)((function(){d(ze()),l(!0)}),[d]),o?Object(ve.jsx)(_e.b,Object(L.a)(Object(L.a)({},c),{},{render:function(){return a?Object(ve.jsx)(_e.a,{to:{pathname:p}}):n}})):null},Lt=function(){return{type:A}},Gt=function(){return{type:S}},Ht=n(53),Jt=n.n(Ht),Ft=n(24),Qt=n.n(Ft),Vt=n(221),Xt=n(224),Kt=function(e){var t=e.fullname,n=e.ingredients,r=e.createdAt,c=e.id,a=Object(_e.g)(),i=Object(Vt.a)(new Date(r),new Date,{locale:Xt.a}),s=new Set(n),o=Object(bt.a)(s);return n?Object(ve.jsxs)("div",{className:Qt.a.wrapper,onClick:function(){return function(e){a.replace({pathname:"/feed/".concat(e)})}(c)},children:[Object(ve.jsxs)("p",{className:Qt.a.flex,children:[Object(ve.jsxs)("span",{className:"text text_type_digits-default",children:["#",c]}),Object(ve.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:i})]}),Object(ve.jsx)("p",{className:"".concat(Qt.a.full_name," text text_type_main-medium mb-6 mt-6"),children:t}),Object(ve.jsxs)("div",{className:"".concat(Qt.a.footer," mb-2"),children:[Object(ve.jsx)("ul",{className:Qt.a.iconsWrapper,children:o.filter((function(e,t){return t<6})).map((function(e,t){var r=n?(null===n||void 0===n?void 0:n.length)-6:0;return Object(ve.jsxs)("li",{className:Qt.a.imageWrapper,children:[Object(ve.jsx)("img",{className:Qt.a.ingredientImage,src:null===e||void 0===e?void 0:e.image,alt:"no img"}),5===t&&Object(ve.jsxs)("span",{className:Qt.a.count,children:["+",r]})]},t)}))}),Object(ve.jsx)("span",{className:Qt.a.icon_and_price,children:Object(ve.jsxs)("div",{className:Qt.a.icon_and_priceWrapper,children:[Object(ve.jsx)("span",{className:"text text_type_digits-default",children:n.reduce((function(e,t){return e+t.price}),0)}),Object(ve.jsx)("span",{className:Qt.a.icon,children:Object(ve.jsx)(be.CurrencyIcon,{type:"primary"})})]})})]})]}):null},Zt=n(45),Yt=n.n(Zt),$t=function(e){var t=e.ordersDone,n=e.ordersPending,r=e.total,c=e.totalToday;return Object(ve.jsxs)("section",{className:Yt.a.wrapper,children:[Object(ve.jsxs)("div",{className:Yt.a.order_status,children:[Object(ve.jsxs)("div",{children:[Object(ve.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0413\u043e\u0442\u043e\u0432\u044b: "}),Object(ve.jsx)("div",{className:Yt.a.scrollable,children:t?t.map((function(e,t){return Object(ve.jsx)("p",{className:"".concat(Yt.a.done," text text_type_digits-default"),children:e},t)})):null})]}),Object(ve.jsxs)("div",{children:[Object(ve.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435: "}),Object(ve.jsx)("div",{className:Yt.a.scrollable,children:n?n.map((function(e,t){return Object(ve.jsx)("p",{className:"text text_type_digits-default",children:e},t)})):null})]})]}),Object(ve.jsxs)("div",{children:[Object(ve.jsx)("p",{className:"text text_type_main-medium mt-15",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(ve.jsx)("p",{className:"text text_type_digits-large",children:r})]}),Object(ve.jsxs)("div",{children:[Object(ve.jsx)("p",{className:"text text_type_main-medium mt-15",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(ve.jsx)("p",{className:"text text_type_digits-large",children:c})]})]})},en=function(e){var t=e.orders,n=e.total,r=e.totalToday,c=e.ordersDone,a=e.ordersPending;return Object(ve.jsxs)("div",{className:Jt.a.wrapper,children:[Object(ve.jsxs)("section",{className:Jt.a.feed,children:[Object(ve.jsx)("div",{className:"text text_type_main-medium",children:K.title}),Object(ve.jsx)("div",{className:Jt.a.scrollable,children:t&&t.map((function(e){return Object(ve.jsx)(Kt,Object(L.a)({},e),e.id)}))})]}),Object(ve.jsx)("section",{className:Jt.a.orders,children:Object(ve.jsx)($t,{ordersDone:c,ordersPending:a,total:n,totalToday:r})})]})},tn=function(){var e=ke(),t=Te((function(e){return e.wsOrders})),n=t.total,c=t.totalToday,a=Te((function(e){return e.ingredients.ingredients})),i=t.orders.map((function(e){return{id:e.number,createdAt:e.createdAt,fullname:e.name,status:e.status,ingredients:e.ingredients.map((function(e){return pe(je(a,e))}))}})),s=i.filter((function(e){return"done"===e.status})).map((function(e){return e.id})),o=i.filter((function(e){return"pending"===e.status})).map((function(e){return e.id}));return Object(r.useEffect)((function(){return t.wsConnected||e(Gt()),function(){e(Lt())}}),[e]),Object(ve.jsx)(ve.Fragment,{children:i?Object(ve.jsx)(en,{orders:i,total:n,totalToday:c,ordersDone:s,ordersPending:o}):Object(ve.jsx)("div",{children:"Loading..."})})},nn=n(23),rn=n.n(nn),cn=function(e){var t=e.img,n=e.price,r=e.name,c=e.type,a=e.amount;return a="bun"===c?2:a,Object(ve.jsxs)("div",{className:"".concat(rn.a.itemWrapper," mb-4 mr-6"),children:[Object(ve.jsx)("div",{className:rn.a.iconsWrapper,children:Object(ve.jsx)("div",{className:rn.a.imageWrapper,children:Object(ve.jsx)("img",{className:rn.a.ingredientImage,src:t,alt:"no img"})})}),Object(ve.jsx)("div",{className:"text text_type_main-default",children:r}),Object(ve.jsxs)("div",{className:"".concat(rn.a.price," ml-4 text text_type_digits-default"),children:[Object(ve.jsx)("div",{children:a}),Object(ve.jsx)("div",{children:"x"}),Object(ve.jsx)("div",{children:n})]})]})},an=function(e){var t=e.show,n=e.paramsId,r=e.orders,c=r&&r.length&&r.find((function(e){return e.number===n})),a=c&&Object(Vt.a)(new Date(c.createdAt),new Date,{locale:Xt.a}),i=Te((function(e){return e.ingredients.ingredients})),s=c&&c.ingredients.map((function(e){return je(i,e)})),o=new Map;s&&s.map((function(e){var t=null===e||void 0===e?void 0:e._id;return o.has(t)?o.set(t,o.get(t)+1):o.set(t,1),o}));var l=s&&new Set(s),d=Object(bt.a)(l);return Object(ve.jsxs)("div",{className:rn.a.wrapper,children:[t?Object(ve.jsxs)("p",{className:"".concat(rn.a.id," text text_type_digits-default"),children:["#",n]}):null,Object(ve.jsx)("p",{className:"text text_type_main-medium mb-3",children:c&&c.name}),Object(ve.jsx)("p",{className:"text text_type_main-small mb-15",children:c&&function(e){switch(e){case"done":return"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d";case"created":return"\u041f\u0440\u0438\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d";case"cancelled":return"\u041e\u0442\u043c\u0435\u043d\u0435\u043d";case"pending":return"\u041e\u0436\u0438\u0434\u0430\u043d\u0438\u0435"}}(c.status)}),Object(ve.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(ve.jsx)("div",{className:"".concat(rn.a.scrollable," mb-10"),children:d.map((function(e,t){var n=o.get(null===e||void 0===e?void 0:e._id);return e&&Object(ve.jsx)(cn,{img:e.image,name:e.name,type:e.type,price:e.price,amount:n},t)}))}),Object(ve.jsxs)("footer",{className:"mb-15 ".concat(rn.a.footer),children:[Object(ve.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:a}),Object(ve.jsxs)("span",{className:"".concat(rn.a.icon," text text_type_digits-default"),children:[s&&s.reduce((function(e,t){return e+t.price}),0),Object(ve.jsx)(be.CurrencyIcon,{type:"primary"})]})]})]})},sn=function(){var e=Object(_e.i)().id,t=ke(),n=parseInt(e,10),c=Te((function(e){return e.wsOrders.orders})),a=Te((function(e){return e.ingredients.ingredients})),i=Object(_e.h)();return Object(r.useEffect)((function(){return c.length||t(Gt()),a.length||t(me()),function(){t(Lt())}}),[t,c,a]),c.length?Object(ve.jsx)(ve.Fragment,{children:i.key?Object(ve.jsx)(Et,{headerTitle:n,from:"/feed",children:Object(ve.jsx)(an,{show:!1,orders:c,paramsId:n})}):Object(ve.jsx)(an,{show:!0,orders:c,paramsId:n})}):null},on=n(31),ln=n.n(on),dn=n(25),un=n.n(dn),pn=function(e){var t=e.createdAt,n=e.number,r=e.name,c=e.ingredients,a=e.status,i=Object(Vt.a)(new Date(t),new Date,{locale:Xt.a}),s=Te((function(e){return e.ingredients.ingredients})),o=c.map((function(e){return je(s,e)})),l=new Set(o),d=Object(bt.a)(l),u=Object(_e.g)();return Object(ve.jsxs)("div",{className:un.a.wrapper,onClick:function(){return e=n,void u.replace({pathname:"/profile/orders/".concat(e)});var e},children:[Object(ve.jsxs)("p",{className:"".concat(un.a.flex," mb-6"),children:[Object(ve.jsxs)("span",{className:"text text_type_digits-default",children:["#",n]}),Object(ve.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:i})]}),Object(ve.jsx)("p",{className:"".concat(un.a.full_name," text text_type_main-medium mb-2"),children:r}),Object(ve.jsx)("p",{className:"text text_type_main-default mb-6",children:function(e){switch(e){case"done":return"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d";case"created":return"\u041f\u0440\u0438\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d";case"cancelled":return"\u041e\u0442\u043c\u0435\u043d\u0435\u043d";case"pending":return"\u041e\u0436\u0438\u0434\u0430\u043d\u0438\u0435"}}(a)}),Object(ve.jsxs)("div",{className:"".concat(un.a.footer," mb-6"),children:[Object(ve.jsx)("ul",{className:un.a.iconsWrapper,children:d.filter((function(e,t){return t<6})).map((function(e,t){var n=c?(null===c||void 0===c?void 0:c.length)-6:0;return Object(ve.jsxs)("li",{className:un.a.imageWrapper,children:[Object(ve.jsx)("img",{className:un.a.ingredientImage,src:null===e||void 0===e?void 0:e.image,alt:"no img"}),5===t&&Object(ve.jsxs)("span",{className:un.a.count,children:["+",n]})]},t)}))}),Object(ve.jsx)("span",{className:un.a.icon_and_price,children:Object(ve.jsxs)("div",{className:un.a.icon_and_priceWrapper,children:[Object(ve.jsx)("span",{className:"text text_type_digits-default",children:o.reduce((function(e,t){return e+t.price}),0)}),Object(ve.jsx)("span",{className:un.a.icon,children:Object(ve.jsx)(be.CurrencyIcon,{type:"primary"})})]})})]})]})},jn=function(){var e="text text_type_main-medium text_color_inactive",t=Object(r.useState)("/profile/orders"),n=Object(Ie.a)(t,2),c=n[0],a=n[1],i=Te((function(e){return e.wsOrders})),s=ke(),o=Object(bt.a)(null===i||void 0===i?void 0:i.userOrders).reverse();return Object(r.useEffect)((function(){return i.wsUserConnected||s({type:T}),function(){s({type:M})}}),[s]),Object(ve.jsxs)("div",{className:ln.a.wrapper,children:[Object(ve.jsxs)("nav",{className:"".concat(ln.a.nav," mr-30"),children:[Object(ve.jsxs)("div",{className:"".concat(ln.a.list," mb-20"),children:[Object(ve.jsx)(Oe.c,{to:"/profile",className:"".concat(ln.a.listItem," ").concat(e),activeClassName:"/profile"===c?"".concat(ln.a.active):"",onClick:function(){return a("/profile")},children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(ve.jsx)(Oe.c,{to:"/profile/orders",className:"".concat(ln.a.listItem," ").concat(e),activeClassName:"/profile/orders"===c?"".concat(ln.a.active):"",onClick:function(){return a("/profile/orders")},children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(ve.jsx)("div",{className:"".concat(ln.a.listItem," ").concat(e),onClick:function(){s(Be())},children:"\u0412\u044b\u0445\u043e\u0434"})]}),Object(ve.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0441\u0432\u043e\u0438\u0445 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]}),Object(ve.jsx)("div",{className:ln.a.scrollable,children:!!i.userOrders.length&&o.map((function(e,t){return Object(r.createElement)(pn,Object(L.a)(Object(L.a)({},e),{},{key:t}))}))})]})},mn=function(){var e=Object(_e.i)().id,t=ke(),n=parseInt(e,10),c=Object(_e.h)(),a=Te((function(e){return e.wsOrders.orders}));return Object(r.useEffect)((function(){a.length||t(Gt())}),[t,a]),a.length?Object(ve.jsx)(ve.Fragment,{children:c.key?Object(ve.jsx)(Et,{headerTitle:n,from:"/profile/orders",children:Object(ve.jsx)(an,{show:!1,orders:a,paramsId:n})}):Object(ve.jsx)(an,{show:!0,orders:a,paramsId:n})}):null},bn=function(e){var t=e.ingredients,n=Object(_e.h)(),r=n.state&&n.state.background;return Object(ve.jsxs)(ve.Fragment,{children:[Object(ve.jsx)(Ne,{}),Object(ve.jsxs)(_e.d,{location:r||n,children:[Object(ve.jsx)(_e.b,{path:X.path,exact:!0,children:Object(ve.jsx)(Mt,{})}),Object(ve.jsx)(_e.b,{path:te.path,children:Object(ve.jsx)(Bt,{ingredients:t})}),Object(ve.jsx)(_e.b,{path:K.path,exact:!0,children:Object(ve.jsx)(tn,{})}),Object(ve.jsx)(_e.b,{path:Z.path,children:Object(ve.jsx)(sn,{})}),Object(ve.jsx)(qt,{path:ne.path,exact:!0,children:Object(ve.jsx)(qe,{})}),Object(ve.jsx)(qt,{path:re.path,exact:!0,children:Object(ve.jsx)(He,{})}),Object(ve.jsx)(qt,{path:ce.path,exact:!0,children:Object(ve.jsx)(Qe,{})}),Object(ve.jsx)(qt,{path:ae.path,exact:!0,children:Object(ve.jsx)(Ke,{})}),Object(ve.jsx)(at,{path:Y.path,exact:!0,children:Object(ve.jsx)($e,{})}),Object(ve.jsx)(at,{path:$.path,exact:!0,children:Object(ve.jsx)(jn,{})}),Object(ve.jsx)(at,{path:ee.path,exact:!0,children:Object(ve.jsx)(mn,{})}),Object(ve.jsx)(_e.b,{path:"*",children:Object(ve.jsx)(nt,{})})]})]})},_n=function(){var e=ke(),t=Te((function(e){return e.ingredients})).ingredients;return Object(r.useEffect)((function(){t.length||e(me())}),[e,t.length]),Object(ve.jsx)(bn,{ingredients:t})},On=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,225)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))},fn={ingredients:[],ingredientsError:!1,ingredientsRequest:!1,currentIngredient:{},isModal:!1},xn={constructorIngredients:[],bun:{_id:"",name:"",type:"bun",proteins:0,fat:0,carbohydrates:0,calories:0,price:0,image:"",image_mobile:"",image_large:"",uniqueId:0,index:0},ingredientsMap:new Map,bunMap:new Map,order:Number(),orderError:!1,orderRequest:!1,isModal:!1},hn={email:"",password:"",name:"",isAuth:!1,request:!1,error:!1,resetPassSuccess:!1},gn={wsConnected:!1,orders:[],total:0,totalToday:0,userOrders:[],wsUserConnected:!1},vn=n(38),yn=n(124),Nn=function(e,t){return function(n){var r=null;return function(c){return function(a){var i=n.dispatch,s=a.type,o=t.wsInit,l=t.onOpen,d=t.onClose,u=t.onError,p=t.onMessage,j=t.wsUserInit,m=ie("accessToken");s===o?r=new WebSocket("".concat(e,"/all")):s===j&&m&&(r=new WebSocket("".concat(e).concat("?token="+m))),r&&(r.onopen=function(e){i({type:l,payload:e})},r.onerror=function(e){i({type:u,payload:e})},r.onclose=function(e){i({type:d,payload:e})},r.onmessage=function(e){var t=e.data,n=JSON.parse(t);i({type:p,payload:n})}),c(a)}}}},wn={wsInit:S,onOpen:R,onClose:A,onError:W,onMessage:U},In={wsUserInit:T,onOpen:k,onClose:M,onError:D,onMessage:P},Cn=Object(vn.b)({ingredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(L.a)(Object(L.a)({},e),{},{isModal:!0});case j:return Object(L.a)(Object(L.a)({},e),{},{isModal:!1});case o:return Object(L.a)(Object(L.a)({},e),{},{ingredientsRequest:!0});case l:return Object(L.a)(Object(L.a)({},e),{},{ingredientsError:!0,ingredientsRequest:!1});case s:return Object(L.a)(Object(L.a)({},e),{},{ingredients:t.ingredients,ingredientsError:!1,ingredientsRequest:!1});case d:return Object(L.a)(Object(L.a)({},e),{},{currentIngredient:Object(L.a)({},t.ingredient)});case u:return Object(L.a)(Object(L.a)({},e),{},{currentIngredient:{}});default:return e}},burgerConstructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(L.a)(Object(L.a)({},e),{},{isModal:!0});case w:return Object(L.a)(Object(L.a)({},e),{},{isModal:!1});case m:return Object(L.a)(Object(L.a)({},e),{},{bun:t.item});case b:return Object(L.a)(Object(L.a)({},e),{},{constructorIngredients:[].concat(Object(bt.a)(e.constructorIngredients),[t.item])});case f:var n=e.ingredientsMap,r=t.id;return n.has(r)?n.set(r,n.get(r)+1):n.set(r,1),Object(L.a)(Object(L.a)({},e),{},{ingredientsMap:n});case x:var c=e.bunMap,a=t.id;return c.has(a)||(c.clear(),c.set(a,1)),Object(L.a)(Object(L.a)({},e),{},{bunMap:c});case g:return Object(L.a)(Object(L.a)({},e),{},{orderRequest:!0});case v:return Object(L.a)(Object(L.a)({},e),{},{orderError:!0,orderRequest:!1});case h:return Object(L.a)(Object(L.a)({},e),{},{order:t.number,orderError:!1,orderRequest:!1});case _:var i=pe(e.constructorIngredients.find((function(e){return e.uniqueId===t.dragIndex}))),s=e.constructorIngredients.findIndex((function(e){return e.uniqueId===t.dragIndex})),o=e.constructorIngredients.findIndex((function(e){return e.uniqueId===t.hoverIndex})),l=Object(bt.a)(e.constructorIngredients);return l.splice(s,1),l.splice(o,0,i),Object(L.a)(Object(L.a)({},e),{},{constructorIngredients:l});case O:var d=e.constructorIngredients.findIndex((function(e){return e.uniqueId===t.id})),u=Object(bt.a)(e.constructorIngredients);u.splice(d,1);var p=e.constructorIngredients[d]._id,j=e.ingredientsMap;return j.has(p)&&j.set(p,j.get(p)-1),Object(L.a)(Object(L.a)({},e),{},{constructorIngredients:u,ingredientsMap:j});case y:return Object(L.a)(Object(L.a)({},e),{},{constructorIngredients:[],bun:{_id:"",name:"",type:"bun",proteins:0,fat:0,carbohydrates:0,calories:0,price:0,image:"",image_mobile:"",image_large:"",uniqueId:0,index:0},bunMap:new Map,ingredientsMap:new Map});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(L.a)(Object(L.a)({},e),{},{error:!1,request:!0},t.payload);case C:return Object(L.a)(Object(L.a)({},e),{},{error:!0,request:!1},t.payload);case E:return Object(L.a)(Object(L.a)({},e),{},{error:!1,request:!1},t.payload);default:return e}},wsOrders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:case W:return Object(L.a)(Object(L.a)({},e),{},{wsConnected:!1});case R:return Object(L.a)(Object(L.a)({},e),{},{wsConnected:!0});case U:return Object(L.a)(Object(L.a)({},e),{},{total:t.payload.total,totalToday:t.payload.totalToday,orders:t.payload.orders});case P:return Object(L.a)(Object(L.a)({},e),{},{userOrders:t.payload.orders});case k:return Object(L.a)(Object(L.a)({},e),{},{wsUserConnected:!0});case M:case D:return Object(L.a)(Object(L.a)({},e),{},{wsUserConnected:!1});default:return e}}}),En=window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||vn.c,Sn=Object(vn.d)(Cn,En(Object(vn.a)(yn.a,Nn(H,wn),Nn(H,In)))),Tn=n(220),kn=n(125);i.a.render(Object(ve.jsx)(c.a.StrictMode,{children:Object(ve.jsx)(Oe.a,{children:Object(ve.jsx)(Se.a,{store:Sn,children:Object(ve.jsx)(Tn.a,{backend:kn.a,children:Object(ve.jsx)(_n,{})})})})}),document.getElementById("root")),On()},23:function(e,t,n){e.exports={wrapper:"feed-page_wrapper__3trkL",id:"feed-page_id__jXsPX",footer:"feed-page_footer__2zCQ_",icon:"feed-page_icon__pnkok",itemWrapper:"feed-page_itemWrapper__5WRt8",iconsWrapper:"feed-page_iconsWrapper__3ORx_",imageWrapper:"feed-page_imageWrapper__1GQKe",ingredientImage:"feed-page_ingredientImage__3DC_O",price:"feed-page_price__5kMy6",scrollable:"feed-page_scrollable__1V1Ao"}},24:function(e,t,n){e.exports={wrapper:"order-item_wrapper__ikpA2",ingredients:"order-item_ingredients__4HcB-",full_name:"order-item_full_name__2YB5m",footer:"order-item_footer__2ynoy",iconsWrapper:"order-item_iconsWrapper__wfLKO",imageWrapper:"order-item_imageWrapper__1JubI",ingredientImage:"order-item_ingredientImage__egArF",flex:"order-item_flex__3lA9j",icon_and_price:"order-item_icon_and_price__3NyHw",icon_and_priceWrapper:"order-item_icon_and_priceWrapper__3GJlv",count:"order-item_count__3Jj0I"}},25:function(e,t,n){e.exports={wrapper:"order-item_wrapper__1tHsW",ingredients:"order-item_ingredients__385rX",full_name:"order-item_full_name__2_p-X",footer:"order-item_footer__2Akjr",iconsWrapper:"order-item_iconsWrapper__Gv3ZB",imageWrapper:"order-item_imageWrapper__1NQ7z",ingredientImage:"order-item_ingredientImage__2VGqm",flex:"order-item_flex__3UJyC",icon_and_price:"order-item_icon_and_price__36YUq",icon_and_priceWrapper:"order-item_icon_and_priceWrapper__2T8h-",count:"order-item_count__HFZFG"}},30:function(e,t,n){e.exports={wrapper:"profile_wrapper__Pi74A",form:"profile_form__3ZkA-",nav:"profile_nav__1-vIT",list:"profile_list__2U0E0",listItem:"profile_listItem__2HnH6",active:"profile_active__1dKlQ"}},31:function(e,t,n){e.exports={wrapper:"profile-orders_wrapper__rvvVJ",nav:"profile-orders_nav__1Fz8c",list:"profile-orders_list__1y0kv",listItem:"profile-orders_listItem__2Usdz",active:"profile-orders_active__2gM9C",scrollable:"profile-orders_scrollable__1Hq8A"}},33:function(e,t,n){e.exports={wrapper:"burger-ingredients_wrapper__2WL6X",scrollable:"burger-ingredients_scrollable__3_ugk",figure:"burger-ingredients_figure__XCJm7",ingredientContainer:"burger-ingredients_ingredientContainer__3-Axa"}},39:function(e,t,n){e.exports={wrapper:"burger-constructor_wrapper__1PwzH",bun:"burger-constructor_bun__3kzmO",scrollable:"burger-constructor_scrollable__2wU_4",footer:"burger-constructor_footer__2ymy-",summary:"burger-constructor_summary__3EX2j"}},40:function(e,t,n){e.exports={wrapper:"ingredient-details_wrapper__2mKTd",detailsContainer:"ingredient-details_detailsContainer__aljA9",details:"ingredient-details_details__2-o8m"}},44:function(e,t,n){e.exports={wrapper:"burger-ingredient_wrapper__38HmI",price:"burger-ingredient_price__PwUrx",counter:"burger-ingredient_counter__184S-",link:"burger-ingredient_link__3ttGr"}},45:function(e,t,n){e.exports={order_status:"order-status-board_order_status__303Nu",scrollable:"order-status-board_scrollable__8SdZ0",wrapper:"order-status-board_wrapper__1UQQ_",done:"order-status-board_done__nJ1x4"}},52:function(e,t,n){e.exports={header:"app-header_header__27JyB",wrapper:"app-header_wrapper__1uWk0",logoWrapper:"app-header_logoWrapper__nwPlh",nav:"app-header_nav__2CsKz"}},53:function(e,t,n){e.exports={wrapper:"feed_wrapper__2UQNR",feed:"feed_feed__3GHqx",orders:"feed_orders__8CqEB",scrollable:"feed_scrollable__TAsW0"}},64:function(e,t,n){e.exports={navTitle:"header-nav-item_navTitle__2W5Gv",inactive:"header-nav-item_inactive__3bn5U",active:"header-nav-item_active__21K9O",wrapper:"header-nav-item_wrapper__21TIB"}},65:function(e,t,n){e.exports={wrapper:"modal_wrapper__uEJcf",button:"modal_button__l5jH0",header:"modal_header__drwKg"}},87:function(e,t,n){e.exports={wrapper:"login_wrapper__3n7lB",form:"login_form__17j0r"}},88:function(e,t,n){e.exports={wrapper:"sign-up_wrapper__1bAFC",form:"sign-up_form__RlChb"}},89:function(e,t,n){e.exports={wrapper:"new-password_wrapper__1xQ_f",form:"new-password_form__1OwKM"}},90:function(e,t,n){e.exports={wrapper:"reset-password_wrapper__1wwdr",form:"reset-password_form__3QLeL"}}},[[215,1,2]]]);
//# sourceMappingURL=main.0d6ecc37.chunk.js.map